{"ast":null,"code":"var _jsxFileName = \"C:\\\\Ak\\\\E\\\\reddish-master\\\\client\\\\src\\\\components\\\\PostList.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { fetchPosts, loadMorePosts, toggleUpvote, toggleDownvote } from '../reducers/postReducer';\nimport { notify } from '../reducers/notificationReducer';\nimport PostCard from './PostCard';\nimport SortTabBar from './SortTabBar';\nimport LoadMoreButton from './LoadMoreButton';\nimport LoadingSpinner from './LoadingSpinner';\nimport getErrorMsg from '../utils/getErrorMsg';\nimport { Typography } from '@material-ui/core';\nimport { usePostListStyles } from '../styles/muiStyles';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PostList = () => {\n  _s();\n  const [sortBy, setSortBy] = useState('hot');\n  const [page, setPage] = useState(1);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [pageLoading, setPageLoading] = useState(false);\n  const posts = useSelector(state => state.posts);\n  const user = useSelector(state => state.user);\n  const dispatch = useDispatch();\n  const classes = usePostListStyles();\n  const handleTabChange = async (e, newValue) => {\n    try {\n      setPageLoading(true);\n      await dispatch(fetchPosts(newValue));\n      setSortBy(newValue);\n      setPageLoading(false);\n      if (page !== 1) {\n        setPage(1);\n      }\n    } catch (err) {\n      setPageLoading(false);\n      dispatch(notify(getErrorMsg(err), 'error'));\n    }\n  };\n  const handleLoadPosts = async () => {\n    try {\n      setLoadingMore(true);\n      await dispatch(loadMorePosts(sortBy, page + 1));\n      setPage(prevState => prevState + 1);\n      setLoadingMore(false);\n    } catch (err) {\n      setLoadingMore(false);\n      dispatch(notify(getErrorMsg(err), 'error'));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.root,\n    children: [/*#__PURE__*/_jsxDEV(SortTabBar, {\n      sortBy: sortBy,\n      handleTabChange: handleTabChange,\n      subscribedTab: true,\n      user: user\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), posts && posts.results && !pageLoading ? posts.results.map(post => /*#__PURE__*/_jsxDEV(PostCard, {\n      post: post,\n      toggleUpvote: toggleUpvote,\n      toggleDownvote: toggleDownvote\n    }, post.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }, this)) : /*#__PURE__*/_jsxDEV(LoadingSpinner, {\n      text: 'Fetching posts. Wait a sec.'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }, this), sortBy === 'subscribed' && posts.results.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.noSubscribedPosts,\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h5\",\n        color: \"secondary\",\n        children: \"No Posts Found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        color: \"secondary\",\n        children: \"Subscribe to more subs if you haven't!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }, this), posts && 'next' in posts && !pageLoading && /*#__PURE__*/_jsxDEV(LoadMoreButton, {\n      handleLoadPosts: handleLoadPosts,\n      loading: loadingMore\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n};\n_s(PostList, \"j/AMyG1yXDmJsW1wtd2gO/BRGW4=\", false, function () {\n  return [useSelector, useSelector, useDispatch, usePostListStyles];\n});\n_c = PostList;\nexport default PostList;\nvar _c;\n$RefreshReg$(_c, \"PostList\");","map":{"version":3,"names":["React","useState","useSelector","useDispatch","fetchPosts","loadMorePosts","toggleUpvote","toggleDownvote","notify","PostCard","SortTabBar","LoadMoreButton","LoadingSpinner","getErrorMsg","Typography","usePostListStyles","jsxDEV","_jsxDEV","PostList","_s","sortBy","setSortBy","page","setPage","loadingMore","setLoadingMore","pageLoading","setPageLoading","posts","state","user","dispatch","classes","handleTabChange","e","newValue","err","handleLoadPosts","prevState","className","root","children","subscribedTab","fileName","_jsxFileName","lineNumber","columnNumber","results","map","post","id","text","length","noSubscribedPosts","variant","color","loading","_c","$RefreshReg$"],"sources":["C:/Ak/E/reddish-master/client/src/components/PostList.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport {\n  fetchPosts,\n  loadMorePosts,\n  toggleUpvote,\n  toggleDownvote,\n} from '../reducers/postReducer';\nimport { notify } from '../reducers/notificationReducer';\nimport PostCard from './PostCard';\nimport SortTabBar from './SortTabBar';\nimport LoadMoreButton from './LoadMoreButton';\nimport LoadingSpinner from './LoadingSpinner';\nimport getErrorMsg from '../utils/getErrorMsg';\n\nimport { Typography } from '@material-ui/core';\nimport { usePostListStyles } from '../styles/muiStyles';\n\nconst PostList = () => {\n  const [sortBy, setSortBy] = useState('hot');\n  const [page, setPage] = useState(1);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [pageLoading, setPageLoading] = useState(false);\n  const posts = useSelector((state) => state.posts);\n  const user = useSelector((state) => state.user);\n  const dispatch = useDispatch();\n  const classes = usePostListStyles();\n\n  const handleTabChange = async (e, newValue) => {\n    try {\n      setPageLoading(true);\n      await dispatch(fetchPosts(newValue));\n      setSortBy(newValue);\n      setPageLoading(false);\n\n      if (page !== 1) {\n        setPage(1);\n      }\n    } catch (err) {\n      setPageLoading(false);\n      dispatch(notify(getErrorMsg(err), 'error'));\n    }\n  };\n\n  const handleLoadPosts = async () => {\n    try {\n      setLoadingMore(true);\n      await dispatch(loadMorePosts(sortBy, page + 1));\n      setPage((prevState) => prevState + 1);\n      setLoadingMore(false);\n    } catch (err) {\n      setLoadingMore(false);\n      dispatch(notify(getErrorMsg(err), 'error'));\n    }\n  };\n\n  return (\n    <div className={classes.root}>\n      <SortTabBar\n        sortBy={sortBy}\n        handleTabChange={handleTabChange}\n        subscribedTab={true}\n        user={user}\n      />\n      {posts && posts.results && !pageLoading ? (\n        posts.results.map((post) => (\n          <PostCard\n            post={post}\n            key={post.id}\n            toggleUpvote={toggleUpvote}\n            toggleDownvote={toggleDownvote}\n          />\n        ))\n      ) : (\n        <LoadingSpinner text={'Fetching posts. Wait a sec.'} />\n      )}\n      {sortBy === 'subscribed' && posts.results.length === 0 && (\n        <div className={classes.noSubscribedPosts}>\n          <Typography variant=\"h5\" color=\"secondary\">\n            No Posts Found\n          </Typography>\n          <Typography variant=\"h6\" color=\"secondary\">\n            Subscribe to more subs if you haven't!\n          </Typography>\n        </div>\n      )}\n      {posts && 'next' in posts && !pageLoading && (\n        <LoadMoreButton\n          handleLoadPosts={handleLoadPosts}\n          loading={loadingMore}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default PostList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}