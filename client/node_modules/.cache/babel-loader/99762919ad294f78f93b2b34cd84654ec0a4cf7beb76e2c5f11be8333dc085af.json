{"ast":null,"code":"import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport { SynchronousPromise } from 'synchronous-promise';\nimport ValidationError from '../ValidationError';\nvar promise = function promise(sync) {\n  return sync ? SynchronousPromise : Promise;\n};\nvar unwrapError = function unwrapError(errors) {\n  if (errors === void 0) {\n    errors = [];\n  }\n  return errors.inner && errors.inner.length ? errors.inner : [].concat(errors);\n};\nfunction scopeToValue(promises, value, sync) {\n  //console.log('scopeToValue', promises, value)\n  var p = promise(sync).all(promises); //console.log('scopeToValue B', p)\n\n  var b = p.catch(function (err) {\n    if (err.name === 'ValidationError') err.value = value;\n    throw err;\n  }); //console.log('scopeToValue c', b)\n\n  var c = b.then(function () {\n    return value;\n  }); //console.log('scopeToValue d', c)\n\n  return c;\n}\n/**\n * If not failing on the first error, catch the errors\n * and collect them in an array\n */\n\nexport function propagateErrors(endEarly, errors) {\n  return endEarly ? null : function (err) {\n    errors.push(err);\n    return err.value;\n  };\n}\nexport function settled(promises, sync) {\n  var Promise = promise(sync);\n  return Promise.all(promises.map(function (p) {\n    return Promise.resolve(p).then(function (value) {\n      return {\n        fulfilled: true,\n        value: value\n      };\n    }, function (value) {\n      return {\n        fulfilled: false,\n        value: value\n      };\n    });\n  }));\n}\nexport function collectErrors(_ref) {\n  var validations = _ref.validations,\n    value = _ref.value,\n    path = _ref.path,\n    sync = _ref.sync,\n    errors = _ref.errors,\n    sort = _ref.sort;\n  errors = unwrapError(errors);\n  return settled(validations, sync).then(function (results) {\n    var nestedErrors = results.filter(function (r) {\n      return !r.fulfilled;\n    }).reduce(function (arr, _ref2) {\n      var error = _ref2.value;\n\n      // we are only collecting validation errors\n      if (!ValidationError.isError(error)) {\n        throw error;\n      }\n      return arr.concat(error);\n    }, []);\n    if (sort) nestedErrors.sort(sort); //show parent errors after the nested ones: name.first, name\n\n    errors = nestedErrors.concat(errors);\n    if (errors.length) throw new ValidationError(errors, value, path);\n    return value;\n  });\n}\nexport default function runValidations(_ref3) {\n  var endEarly = _ref3.endEarly,\n    options = _objectWithoutPropertiesLoose(_ref3, [\"endEarly\"]);\n  if (endEarly) return scopeToValue(options.validations, options.value, options.sync);\n  return collectErrors(options);\n}","map":{"version":3,"names":["_objectWithoutPropertiesLoose","SynchronousPromise","ValidationError","promise","sync","Promise","unwrapError","errors","inner","length","concat","scopeToValue","promises","value","p","all","b","catch","err","name","c","then","propagateErrors","endEarly","push","settled","map","resolve","fulfilled","collectErrors","_ref","validations","path","sort","results","nestedErrors","filter","r","reduce","arr","_ref2","error","isError","runValidations","_ref3","options"],"sources":["C:/Ak/E/reddish-master/client/node_modules/yup/es/util/runValidations.js"],"sourcesContent":["import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport { SynchronousPromise } from 'synchronous-promise';\nimport ValidationError from '../ValidationError';\n\nvar promise = function promise(sync) {\n  return sync ? SynchronousPromise : Promise;\n};\n\nvar unwrapError = function unwrapError(errors) {\n  if (errors === void 0) {\n    errors = [];\n  }\n\n  return errors.inner && errors.inner.length ? errors.inner : [].concat(errors);\n};\n\nfunction scopeToValue(promises, value, sync) {\n  //console.log('scopeToValue', promises, value)\n  var p = promise(sync).all(promises); //console.log('scopeToValue B', p)\n\n  var b = p.catch(function (err) {\n    if (err.name === 'ValidationError') err.value = value;\n    throw err;\n  }); //console.log('scopeToValue c', b)\n\n  var c = b.then(function () {\n    return value;\n  }); //console.log('scopeToValue d', c)\n\n  return c;\n}\n/**\n * If not failing on the first error, catch the errors\n * and collect them in an array\n */\n\n\nexport function propagateErrors(endEarly, errors) {\n  return endEarly ? null : function (err) {\n    errors.push(err);\n    return err.value;\n  };\n}\nexport function settled(promises, sync) {\n  var Promise = promise(sync);\n  return Promise.all(promises.map(function (p) {\n    return Promise.resolve(p).then(function (value) {\n      return {\n        fulfilled: true,\n        value: value\n      };\n    }, function (value) {\n      return {\n        fulfilled: false,\n        value: value\n      };\n    });\n  }));\n}\nexport function collectErrors(_ref) {\n  var validations = _ref.validations,\n      value = _ref.value,\n      path = _ref.path,\n      sync = _ref.sync,\n      errors = _ref.errors,\n      sort = _ref.sort;\n  errors = unwrapError(errors);\n  return settled(validations, sync).then(function (results) {\n    var nestedErrors = results.filter(function (r) {\n      return !r.fulfilled;\n    }).reduce(function (arr, _ref2) {\n      var error = _ref2.value;\n\n      // we are only collecting validation errors\n      if (!ValidationError.isError(error)) {\n        throw error;\n      }\n\n      return arr.concat(error);\n    }, []);\n    if (sort) nestedErrors.sort(sort); //show parent errors after the nested ones: name.first, name\n\n    errors = nestedErrors.concat(errors);\n    if (errors.length) throw new ValidationError(errors, value, path);\n    return value;\n  });\n}\nexport default function runValidations(_ref3) {\n  var endEarly = _ref3.endEarly,\n      options = _objectWithoutPropertiesLoose(_ref3, [\"endEarly\"]);\n\n  if (endEarly) return scopeToValue(options.validations, options.value, options.sync);\n  return collectErrors(options);\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}