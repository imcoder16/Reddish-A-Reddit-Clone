{"ast":null,"code":"import _regeneratorRuntime from\"C:/Ak/E/reddish-master/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Ak/E/reddish-master/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Ak/E/reddish-master/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useDispatch}from'react-redux';import{useHistory,useLocation}from'react-router-dom';import DeleteDialog from'./DeleteDialog';import PostFormModal from'./PostFormModal';import{removePost}from'../reducers/postReducer';import{notify}from'../reducers/notificationReducer';import getErrorMsg from'../utils/getErrorMsg';import{IconButton,Menu}from'@material-ui/core';import MoreHorizIcon from'@material-ui/icons/MoreHoriz';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditDeleteMenu=function EditDeleteMenu(_ref){var id=_ref.id,title=_ref.title,postType=_ref.postType,subreddit=_ref.subreddit,buttonType=_ref.buttonType,textSubmission=_ref.textSubmission,linkSubmission=_ref.linkSubmission;var dispatch=useDispatch();var history=useHistory();var location=useLocation();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),anchorEl=_useState2[0],setAnchorEl=_useState2[1];var handleClick=function handleClick(event){setAnchorEl(event.currentTarget);};var handleClose=function handleClose(){setAnchorEl(null);};var handleDeletePost=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;handleClose();_context.next=4;return dispatch(removePost(id));case 4:if(location.pathname!=='/'){history.push('/');}dispatch(notify(\"Post deleted!\",'success'));_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);dispatch(notify(getErrorMsg(_context.t0),'error'));case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function handleDeletePost(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:buttonType==='buttonGroup'?/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex'},children:[/*#__PURE__*/_jsx(PostFormModal,{actionType:\"edit\",handleMenuClose:handleClose,postToEditType:postType,postToEditTitle:title,postToEditSub:subreddit,postToEditId:id,textSubmission:textSubmission,linkSubmission:linkSubmission}),/*#__PURE__*/_jsx(DeleteDialog,{title:title,handleDelete:handleDeletePost,handleMenuClose:handleClose})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(IconButton,{onClick:handleClick,children:/*#__PURE__*/_jsx(MoreHorizIcon,{})}),/*#__PURE__*/_jsxs(Menu,{anchorEl:anchorEl,keepMounted:true,open:Boolean(anchorEl),onClose:handleClose,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(PostFormModal,{actionType:\"edit\",handleMenuClose:handleClose,postToEditType:postType,postToEditTitle:title,postToEditSub:subreddit,postToEditId:id,textSubmission:textSubmission,linkSubmission:linkSubmission})}),/*#__PURE__*/_jsx(DeleteDialog,{title:title,handleDelete:handleDeletePost,handleMenuClose:handleClose})]})]})});};export default EditDeleteMenu;","map":{"version":3,"names":["React","useState","useDispatch","useHistory","useLocation","DeleteDialog","PostFormModal","removePost","notify","getErrorMsg","IconButton","Menu","MoreHorizIcon","jsx","_jsx","jsxs","_jsxs","EditDeleteMenu","_ref","id","title","postType","subreddit","buttonType","textSubmission","linkSubmission","dispatch","history","location","_useState","_useState2","_slicedToArray","anchorEl","setAnchorEl","handleClick","event","currentTarget","handleClose","handleDeletePost","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","pathname","push","t0","stop","apply","arguments","children","style","display","actionType","handleMenuClose","postToEditType","postToEditTitle","postToEditSub","postToEditId","handleDelete","onClick","keepMounted","open","Boolean","onClose"],"sources":["C:/Ak/E/reddish-master/client/src/components/EditDeleteMenu.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport DeleteDialog from './DeleteDialog';\nimport PostFormModal from './PostFormModal';\nimport { removePost } from '../reducers/postReducer';\nimport { notify } from '../reducers/notificationReducer';\nimport getErrorMsg from '../utils/getErrorMsg';\n\nimport { IconButton, Menu } from '@material-ui/core';\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\n\nconst EditDeleteMenu = ({\n  id,\n  title,\n  postType,\n  subreddit,\n  buttonType,\n  textSubmission,\n  linkSubmission,\n}) => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const location = useLocation();\n  const [anchorEl, setAnchorEl] = useState(null);\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleDeletePost = async () => {\n    try {\n      handleClose();\n      await dispatch(removePost(id));\n      if (location.pathname !== '/') {\n        history.push('/');\n      }\n      dispatch(notify(`Post deleted!`, 'success'));\n    } catch (err) {\n      dispatch(notify(getErrorMsg(err), 'error'));\n    }\n  };\n\n  return (\n    <div>\n      {buttonType === 'buttonGroup' ? (\n        <div style={{ display: 'flex' }}>\n          <PostFormModal\n            actionType=\"edit\"\n            handleMenuClose={handleClose}\n            postToEditType={postType}\n            postToEditTitle={title}\n            postToEditSub={subreddit}\n            postToEditId={id}\n            textSubmission={textSubmission}\n            linkSubmission={linkSubmission}\n          />\n          <DeleteDialog\n            title={title}\n            handleDelete={handleDeletePost}\n            handleMenuClose={handleClose}\n          />\n        </div>\n      ) : (\n        <div>\n          <IconButton onClick={handleClick}>\n            <MoreHorizIcon />\n          </IconButton>\n          <Menu\n            anchorEl={anchorEl}\n            keepMounted\n            open={Boolean(anchorEl)}\n            onClose={handleClose}\n          >\n            <div>\n              <PostFormModal\n                actionType=\"edit\"\n                handleMenuClose={handleClose}\n                postToEditType={postType}\n                postToEditTitle={title}\n                postToEditSub={subreddit}\n                postToEditId={id}\n                textSubmission={textSubmission}\n                linkSubmission={linkSubmission}\n              />\n            </div>\n            <DeleteDialog\n              title={title}\n              handleDelete={handleDeletePost}\n              handleMenuClose={handleClose}\n            />\n          </Menu>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default EditDeleteMenu;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}