{"ast":null,"code":"import _regeneratorRuntime from\"C:/Ak/E/reddish-master/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Ak/E/reddish-master/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Ak/E/reddish-master/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{Link as RouterLink}from'react-router-dom';import{useDispatch}from'react-redux';import{addComment}from'../reducers/postCommentsReducer';import{notify}from'../reducers/notificationReducer';import getErrorMsg from'../utils/getErrorMsg';import{Link,Typography,TextField,Button}from'@material-ui/core';import{useCommentInputStyles}from'../styles/muiStyles';import SendIcon from'@material-ui/icons/Send';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CommentInput=function CommentInput(_ref){var user=_ref.user,postId=_ref.postId,isMobile=_ref.isMobile;var classes=useCommentInputStyles();var dispatch=useDispatch();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),comment=_useState2[0],setComment=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),submitting=_useState4[0],setSubmitting=_useState4[1];var handlePostComment=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;setSubmitting(true);_context.next=5;return dispatch(addComment(postId,comment));case 5:setSubmitting(false);setComment('');dispatch(notify(\"Comment submitted!\",'success'));_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);setSubmitting(false);dispatch(notify(getErrorMsg(_context.t0),'error'));case 14:case\"end\":return _context.stop();}},_callee,null,[[1,10]]);}));return function handlePostComment(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:classes.wrapper,children:[user?/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[\"Comment as\",' ',/*#__PURE__*/_jsx(Link,{component:RouterLink,to:\"/u/\".concat(user.username),children:user.username})]}):/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:\"Log in or sign up to leave a comment\"}),/*#__PURE__*/_jsxs(\"form\",{className:classes.form,onSubmit:handlePostComment,children:[/*#__PURE__*/_jsx(TextField,{placeholder:\"What are your thoughts?\",multiline:true,fullWidth:true,required:true,rows:4,rowsMax:Infinity,value:comment,onChange:function onChange(e){return setComment(e.target.value);},variant:\"outlined\",size:isMobile?'small':'medium'}),/*#__PURE__*/_jsx(Button,{type:\"submit\",color:\"primary\",variant:\"contained\",className:classes.commentBtn,startIcon:/*#__PURE__*/_jsx(SendIcon,{}),size:isMobile?'small':'medium',disabled:!user||submitting,children:!user?'Login to comment':submitting?'Commenting':'Comment'})]})]});};export default CommentInput;","map":{"version":3,"names":["React","useState","Link","RouterLink","useDispatch","addComment","notify","getErrorMsg","Typography","TextField","Button","useCommentInputStyles","SendIcon","jsx","_jsx","jsxs","_jsxs","CommentInput","_ref","user","postId","isMobile","classes","dispatch","_useState","_useState2","_slicedToArray","comment","setComment","_useState3","_useState4","submitting","setSubmitting","handlePostComment","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","wrap","_callee$","_context","prev","next","preventDefault","t0","stop","_x","apply","arguments","className","wrapper","children","variant","component","to","concat","username","form","onSubmit","placeholder","multiline","fullWidth","required","rows","rowsMax","Infinity","value","onChange","target","size","type","color","commentBtn","startIcon","disabled"],"sources":["C:/Ak/E/reddish-master/client/src/components/CommentInput.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { addComment } from '../reducers/postCommentsReducer';\nimport { notify } from '../reducers/notificationReducer';\nimport getErrorMsg from '../utils/getErrorMsg';\n\nimport { Link, Typography, TextField, Button } from '@material-ui/core';\nimport { useCommentInputStyles } from '../styles/muiStyles';\nimport SendIcon from '@material-ui/icons/Send';\n\nconst CommentInput = ({ user, postId, isMobile }) => {\n  const classes = useCommentInputStyles();\n  const dispatch = useDispatch();\n  const [comment, setComment] = useState('');\n  const [submitting, setSubmitting] = useState(false);\n\n  const handlePostComment = async (e) => {\n    e.preventDefault();\n    try {\n      setSubmitting(true);\n      await dispatch(addComment(postId, comment));\n      setSubmitting(false);\n      setComment('');\n      dispatch(notify(`Comment submitted!`, 'success'));\n    } catch (err) {\n      setSubmitting(false);\n      dispatch(notify(getErrorMsg(err), 'error'));\n    }\n  };\n\n  return (\n    <div className={classes.wrapper}>\n      {user ? (\n        <Typography variant=\"body2\">\n          Comment as{' '}\n          <Link component={RouterLink} to={`/u/${user.username}`}>\n            {user.username}\n          </Link>\n        </Typography>\n      ) : (\n        <Typography variant=\"body1\">\n          Log in or sign up to leave a comment\n        </Typography>\n      )}\n      <form className={classes.form} onSubmit={handlePostComment}>\n        <TextField\n          placeholder={`What are your thoughts?`}\n          multiline\n          fullWidth\n          required\n          rows={4}\n          rowsMax={Infinity}\n          value={comment}\n          onChange={(e) => setComment(e.target.value)}\n          variant=\"outlined\"\n          size={isMobile ? 'small' : 'medium'}\n        />\n        <Button\n          type=\"submit\"\n          color=\"primary\"\n          variant=\"contained\"\n          className={classes.commentBtn}\n          startIcon={<SendIcon />}\n          size={isMobile ? 'small' : 'medium'}\n          disabled={!user || submitting}\n        >\n          {!user ? 'Login to comment' : submitting ? 'Commenting' : 'Comment'}\n        </Button>\n      </form>\n    </div>\n  );\n};\n\nexport default CommentInput;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}