{"ast":null,"code":"import _slicedToArray from\"C:/Ak/E/reddish-master/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{Link as RouterLink}from'react-router-dom';import AuthFormModal from'./AuthFormModal';import SubFormModal from'./SubFormModal';import UpdateAvatarModal from'./UpdateAvatarModal';import DarkModeMenuItem from'./DarkModeMenuItem';import{getCircularAvatar}from'../utils/cloudinaryTransform';import storageService from'../utils/localStorage';import{Button,Menu,MenuItem,Avatar,Typography,ListItemIcon,Divider}from'@material-ui/core';import{useUserMenuStyles}from'../styles/muiStyles';import FilterVintageIcon from'@material-ui/icons/FilterVintage';import AccountCircleIcon from'@material-ui/icons/AccountCircle';import PowerSettingsNewIcon from'@material-ui/icons/PowerSettingsNew';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var DesktopUserMenu=function DesktopUserMenu(_ref){var _loggedUser$avatar;var user=_ref.user,handleLogout=_ref.handleLogout;var classes=useUserMenuStyles();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),anchorEl=_useState2[0],setAnchorEl=_useState2[1];var handleMenu=function handleMenu(event){setAnchorEl(event.currentTarget);};var handleClose=function handleClose(){setAnchorEl(null);};var handleLogoutClick=function handleLogoutClick(){handleClose();handleLogout();};var loggedUser=storageService.loadUser()||user;return/*#__PURE__*/_jsx(\"div\",{children:loggedUser?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Button,{onClick:handleMenu,className:classes.userBtn,children:[loggedUser!==null&&loggedUser!==void 0&&(_loggedUser$avatar=loggedUser.avatar)!==null&&_loggedUser$avatar!==void 0&&_loggedUser$avatar.exists?/*#__PURE__*/_jsx(Avatar,{alt:loggedUser.username,src:getCircularAvatar(loggedUser.avatar.imageLink),variant:\"rounded\",className:classes.avatar}):/*#__PURE__*/_jsx(Avatar,{variant:\"rounded\",className:classes.avatar,children:loggedUser.username[0]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{color:\"secondary\",children:loggedUser.username}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",className:classes.karmaWrapper,children:[/*#__PURE__*/_jsx(FilterVintageIcon,{fontSize:\"inherit\",style:{marginRight:'0.2em'},color:\"secondary\"}),loggedUser.karma,\" karma\"]})]})]}),/*#__PURE__*/_jsxs(Menu,{anchorEl:anchorEl,anchorOrigin:{vertical:'top',horizontal:'right'},keepMounted:true,transformOrigin:{vertical:'top',horizontal:'right'},open:Boolean(anchorEl),onClose:handleClose,children:[/*#__PURE__*/_jsx(MenuItem,{component:RouterLink,to:\"/u/\".concat(loggedUser.username),onClick:handleClose,children:/*#__PURE__*/_jsxs(ListItemIcon,{children:[/*#__PURE__*/_jsx(AccountCircleIcon,{style:{marginRight:7}}),\" My Profile\"]})}),/*#__PURE__*/_jsx(SubFormModal,{type:\"menu\",handleCloseMenu:handleClose}),/*#__PURE__*/_jsx(UpdateAvatarModal,{handleCloseMenu:handleClose,user:loggedUser}),/*#__PURE__*/_jsx(MenuItem,{onClick:handleLogoutClick,children:/*#__PURE__*/_jsxs(ListItemIcon,{children:[/*#__PURE__*/_jsx(PowerSettingsNewIcon,{style:{marginRight:7}}),\" Logout\"]})}),/*#__PURE__*/_jsx(Divider,{variant:\"middle\"}),/*#__PURE__*/_jsx(DarkModeMenuItem,{closeMenu:handleClose})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:classes.navItems,children:[/*#__PURE__*/_jsx(AuthFormModal,{}),/*#__PURE__*/_jsx(DarkModeMenuItem,{closeMenu:handleClose,navItem:true})]})});};export default DesktopUserMenu;","map":{"version":3,"names":["React","useState","Link","RouterLink","AuthFormModal","SubFormModal","UpdateAvatarModal","DarkModeMenuItem","getCircularAvatar","storageService","Button","Menu","MenuItem","Avatar","Typography","ListItemIcon","Divider","useUserMenuStyles","FilterVintageIcon","AccountCircleIcon","PowerSettingsNewIcon","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","DesktopUserMenu","_ref","_loggedUser$avatar","user","handleLogout","classes","_useState","_useState2","_slicedToArray","anchorEl","setAnchorEl","handleMenu","event","currentTarget","handleClose","handleLogoutClick","loggedUser","loadUser","children","onClick","className","userBtn","avatar","exists","alt","username","src","imageLink","variant","color","karmaWrapper","fontSize","style","marginRight","karma","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","open","Boolean","onClose","component","to","concat","type","handleCloseMenu","closeMenu","navItems","navItem"],"sources":["C:/Ak/E/reddish-master/client/src/components/DesktopUserMenu.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport AuthFormModal from './AuthFormModal';\nimport SubFormModal from './SubFormModal';\nimport UpdateAvatarModal from './UpdateAvatarModal';\nimport DarkModeMenuItem from './DarkModeMenuItem';\nimport { getCircularAvatar } from '../utils/cloudinaryTransform';\nimport storageService from '../utils/localStorage';\n\nimport {\n  Button,\n  Menu,\n  MenuItem,\n  Avatar,\n  Typography,\n  ListItemIcon,\n  Divider,\n} from '@material-ui/core';\nimport { useUserMenuStyles } from '../styles/muiStyles';\nimport FilterVintageIcon from '@material-ui/icons/FilterVintage';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport PowerSettingsNewIcon from '@material-ui/icons/PowerSettingsNew';\n\nconst DesktopUserMenu = ({ user, handleLogout }) => {\n  const classes = useUserMenuStyles();\n  const [anchorEl, setAnchorEl] = useState(null);\n\n  const handleMenu = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleLogoutClick = () => {\n    handleClose();\n    handleLogout();\n  };\n\n  const loggedUser = storageService.loadUser() || user;\n\n  return (\n    <div>\n      {loggedUser ? (\n        <>\n          <Button onClick={handleMenu} className={classes.userBtn}>\n            {loggedUser?.avatar?.exists ? (\n              <Avatar\n                alt={loggedUser.username}\n                src={getCircularAvatar(loggedUser.avatar.imageLink)}\n                variant=\"rounded\"\n                className={classes.avatar}\n              />\n            ) : (\n              <Avatar variant=\"rounded\" className={classes.avatar}>\n                {loggedUser.username[0]}\n              </Avatar>\n            )}\n            <div>\n              <Typography color=\"secondary\">{loggedUser.username}</Typography>\n              <Typography variant=\"caption\" className={classes.karmaWrapper}>\n                <FilterVintageIcon\n                  fontSize=\"inherit\"\n                  style={{ marginRight: '0.2em' }}\n                  color=\"secondary\"\n                />\n                {loggedUser.karma} karma\n              </Typography>\n            </div>\n          </Button>\n          <Menu\n            anchorEl={anchorEl}\n            anchorOrigin={{\n              vertical: 'top',\n              horizontal: 'right',\n            }}\n            keepMounted\n            transformOrigin={{\n              vertical: 'top',\n              horizontal: 'right',\n            }}\n            open={Boolean(anchorEl)}\n            onClose={handleClose}\n          >\n            <MenuItem\n              component={RouterLink}\n              to={`/u/${loggedUser.username}`}\n              onClick={handleClose}\n            >\n              <ListItemIcon>\n                <AccountCircleIcon style={{ marginRight: 7 }} /> My Profile\n              </ListItemIcon>\n            </MenuItem>\n            <SubFormModal type=\"menu\" handleCloseMenu={handleClose} />\n            <UpdateAvatarModal\n              handleCloseMenu={handleClose}\n              user={loggedUser}\n            />\n            <MenuItem onClick={handleLogoutClick}>\n              <ListItemIcon>\n                <PowerSettingsNewIcon style={{ marginRight: 7 }} /> Logout\n              </ListItemIcon>\n            </MenuItem>\n            <Divider variant=\"middle\" />\n            <DarkModeMenuItem closeMenu={handleClose} />\n          </Menu>\n        </>\n      ) : (\n        <div className={classes.navItems}>\n          <AuthFormModal />\n          <DarkModeMenuItem closeMenu={handleClose} navItem={true} />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default DesktopUserMenu;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}