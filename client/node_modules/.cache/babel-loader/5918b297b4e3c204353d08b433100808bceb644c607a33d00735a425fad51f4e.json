{"ast":null,"code":"import _regeneratorRuntime from\"C:/Ak/E/reddish-master/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Ak/E/reddish-master/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Ak/E/reddish-master/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useDispatch}from'react-redux';import{editReply,deleteReply}from'../reducers/postCommentsReducer';import{notify}from'../reducers/notificationReducer';import DeleteDialog from'./DeleteDialog';import getErrorMsg from'../utils/getErrorMsg';import{TextField,Button,Typography}from'@material-ui/core';import{useCommentAndBtnsStyles}from'../styles/muiStyles';import SendIcon from'@material-ui/icons/Send';import EditIcon from'@material-ui/icons/Edit';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ReplyAndButtons=function ReplyAndButtons(_ref){var isMobile=_ref.isMobile,reply=_ref.reply,postId=_ref.postId,commentId=_ref.commentId,user=_ref.user;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),editOpen=_useState2[0],setEditOpen=_useState2[1];var _useState3=useState(reply.replyBody),_useState4=_slicedToArray(_useState3,2),editInput=_useState4[0],setEditInput=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),submitting=_useState6[0],setSubmitting=_useState6[1];var dispatch=useDispatch();var classes=useCommentAndBtnsStyles();var handleEditReply=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;setSubmitting(true);_context.next=4;return dispatch(editReply(postId,commentId,reply.id,editInput));case 4:setSubmitting(false);setEditOpen(false);dispatch(notify(\"Reply edited!\",'success'));_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);setSubmitting(false);dispatch(notify(getErrorMsg(_context.t0),'error'));case 13:case\"end\":return _context.stop();}},_callee,null,[[0,9]]);}));return function handleEditReply(){return _ref2.apply(this,arguments);};}();var handleReplyDelete=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return dispatch(deleteReply(postId,commentId,reply.id));case 3:dispatch(notify(\"Reply deleted!\",'success'));_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);dispatch(notify(getErrorMsg(_context2.t0),'error'));case 9:case\"end\":return _context2.stop();}},_callee2,null,[[0,6]]);}));return function handleReplyDelete(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[!editOpen?/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:reply.replyBody}):/*#__PURE__*/_jsxs(\"div\",{className:classes.inputDiv,children:[/*#__PURE__*/_jsx(TextField,{multiline:true,required:true,fullWidth:true,rows:2,rowsMax:Infinity,value:editInput,onChange:function onChange(e){return setEditInput(e.target.value);},variant:\"outlined\",size:isMobile?'small':'medium'}),/*#__PURE__*/_jsxs(\"div\",{className:classes.submitBtns,children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return setEditOpen(false);},color:\"primary\",variant:\"outlined\",size:\"small\",className:classes.cancelBtn,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:handleEditReply,color:\"primary\",variant:\"contained\",startIcon:/*#__PURE__*/_jsx(SendIcon,{}),size:\"small\",disabled:submitting,children:submitting?'Updating':'Update'})]})]}),user&&user.id===reply.repliedBy.id&&/*#__PURE__*/_jsxs(\"div\",{className:classes.btnBar,children:[/*#__PURE__*/_jsx(Button,{size:\"small\",color:\"inherit\",startIcon:/*#__PURE__*/_jsx(EditIcon,{}),className:classes.btnStyle,onClick:function onClick(){return setEditOpen(function(prevState){return!prevState;});},children:\"Edit\"}),/*#__PURE__*/_jsx(DeleteDialog,{type:\"comment\",handleDelete:handleReplyDelete})]})]});};export default ReplyAndButtons;","map":{"version":3,"names":["React","useState","useDispatch","editReply","deleteReply","notify","DeleteDialog","getErrorMsg","TextField","Button","Typography","useCommentAndBtnsStyles","SendIcon","EditIcon","jsx","_jsx","jsxs","_jsxs","ReplyAndButtons","_ref","isMobile","reply","postId","commentId","user","_useState","_useState2","_slicedToArray","editOpen","setEditOpen","_useState3","replyBody","_useState4","editInput","setEditInput","_useState5","_useState6","submitting","setSubmitting","dispatch","classes","handleEditReply","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","id","t0","stop","apply","arguments","handleReplyDelete","_ref3","_callee2","_callee2$","_context2","children","variant","className","inputDiv","multiline","required","fullWidth","rows","rowsMax","Infinity","value","onChange","e","target","size","submitBtns","onClick","color","cancelBtn","startIcon","disabled","repliedBy","btnBar","btnStyle","prevState","type","handleDelete"],"sources":["C:/Ak/E/reddish-master/client/src/components/ReplyAndButtons.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { editReply, deleteReply } from '../reducers/postCommentsReducer';\nimport { notify } from '../reducers/notificationReducer';\nimport DeleteDialog from './DeleteDialog';\nimport getErrorMsg from '../utils/getErrorMsg';\n\nimport { TextField, Button, Typography } from '@material-ui/core';\nimport { useCommentAndBtnsStyles } from '../styles/muiStyles';\nimport SendIcon from '@material-ui/icons/Send';\nimport EditIcon from '@material-ui/icons/Edit';\n\nconst ReplyAndButtons = ({ isMobile, reply, postId, commentId, user }) => {\n  const [editOpen, setEditOpen] = useState(false);\n  const [editInput, setEditInput] = useState(reply.replyBody);\n  const [submitting, setSubmitting] = useState(false);\n  const dispatch = useDispatch();\n  const classes = useCommentAndBtnsStyles();\n\n  const handleEditReply = async () => {\n    try {\n      setSubmitting(true);\n      await dispatch(editReply(postId, commentId, reply.id, editInput));\n      setSubmitting(false);\n      setEditOpen(false);\n      dispatch(notify(`Reply edited!`, 'success'));\n    } catch (err) {\n      setSubmitting(false);\n      dispatch(notify(getErrorMsg(err), 'error'));\n    }\n  };\n\n  const handleReplyDelete = async () => {\n    try {\n      await dispatch(deleteReply(postId, commentId, reply.id));\n      dispatch(notify(`Reply deleted!`, 'success'));\n    } catch (err) {\n      dispatch(notify(getErrorMsg(err), 'error'));\n    }\n  };\n\n  return (\n    <div>\n      {!editOpen ? (\n        <Typography variant=\"body2\">{reply.replyBody}</Typography>\n      ) : (\n        <div className={classes.inputDiv}>\n          <TextField\n            multiline\n            required\n            fullWidth\n            rows={2}\n            rowsMax={Infinity}\n            value={editInput}\n            onChange={(e) => setEditInput(e.target.value)}\n            variant=\"outlined\"\n            size={isMobile ? 'small' : 'medium'}\n          />\n          <div className={classes.submitBtns}>\n            <Button\n              onClick={() => setEditOpen(false)}\n              color=\"primary\"\n              variant=\"outlined\"\n              size=\"small\"\n              className={classes.cancelBtn}\n            >\n              Cancel\n            </Button>\n            <Button\n              onClick={handleEditReply}\n              color=\"primary\"\n              variant=\"contained\"\n              startIcon={<SendIcon />}\n              size=\"small\"\n              disabled={submitting}\n            >\n              {submitting ? 'Updating' : 'Update'}\n            </Button>\n          </div>\n        </div>\n      )}\n      {user && user.id === reply.repliedBy.id && (\n        <div className={classes.btnBar}>\n          <Button\n            size=\"small\"\n            color=\"inherit\"\n            startIcon={<EditIcon />}\n            className={classes.btnStyle}\n            onClick={() => setEditOpen((prevState) => !prevState)}\n          >\n            Edit\n          </Button>\n          <DeleteDialog type=\"comment\" handleDelete={handleReplyDelete} />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ReplyAndButtons;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}