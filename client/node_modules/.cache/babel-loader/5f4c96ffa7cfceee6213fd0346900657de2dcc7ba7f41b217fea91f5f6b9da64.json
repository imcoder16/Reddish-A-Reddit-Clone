{"ast":null,"code":"var _jsxFileName = \"C:\\\\Ak\\\\E\\\\reddish-master\\\\client\\\\src\\\\components\\\\SearchResults.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setSearchResults, toggleUpvote, toggleDownvote, loadSearchPosts } from '../reducers/searchReducer';\nimport { notify } from '../reducers/notificationReducer';\nimport PostCard from './PostCard';\nimport LoadMoreButton from './LoadMoreButton';\nimport LoadingSpinner from './LoadingSpinner';\nimport getErrorMsg from '../utils/getErrorMsg';\nimport { Container, Paper, Typography } from '@material-ui/core';\nimport { useSearchPageStyles } from '../styles/muiStyles';\nimport SearchIcon from '@material-ui/icons/Search';\nimport SentimentVeryDissatisfiedIcon from '@material-ui/icons/SentimentVeryDissatisfied';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SearchResults = () => {\n  _s();\n  const classes = useSearchPageStyles();\n  const {\n    query\n  } = useParams();\n  const dispatch = useDispatch();\n  const searchResults = useSelector(state => state.search);\n  const [page, setPage] = useState(1);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [pageLoading, setPageLoading] = useState(true);\n  useEffect(() => {\n    const getSearchResults = async () => {\n      try {\n        setPageLoading(true);\n        await dispatch(setSearchResults(query));\n        setPageLoading(false);\n      } catch (err) {\n        dispatch(notify(getErrorMsg(err), 'error'));\n      }\n    };\n    getSearchResults();\n    setPage(1);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [query]);\n  if (!searchResults || pageLoading) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      disableGutters: true,\n      children: /*#__PURE__*/_jsxDEV(Paper, {\n        variant: \"outlined\",\n        className: classes.mainPaper,\n        children: /*#__PURE__*/_jsxDEV(LoadingSpinner, {\n          text: 'Searching for matches...'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this);\n  }\n  const handleLoadPosts = async () => {\n    try {\n      setLoadingMore(true);\n      await dispatch(loadSearchPosts(query, page + 1));\n      setPage(prevState => prevState + 1);\n      setLoadingMore(false);\n    } catch (err) {\n      dispatch(notify(getErrorMsg(err), 'error'));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    disableGutters: true,\n    children: /*#__PURE__*/_jsxDEV(Paper, {\n      variant: \"outlined\",\n      className: classes.mainPaper,\n      children: [/*#__PURE__*/_jsxDEV(Paper, {\n        variant: \"outlined\",\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          color: \"secondary\",\n          className: classes.infoPaper,\n          children: [/*#__PURE__*/_jsxDEV(SearchIcon, {\n            fontSize: \"large\",\n            style: {\n              marginRight: '7px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }, this), \"Showing search results for \\\"\", query, \"\\\"\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), searchResults.results.length !== 0 ? searchResults.results.map(s => /*#__PURE__*/_jsxDEV(PostCard, {\n        post: s,\n        toggleUpvote: toggleUpvote,\n        toggleDownvote: toggleDownvote\n      }, s.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }, this)) : /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h5\",\n        className: classes.noResults,\n        children: [/*#__PURE__*/_jsxDEV(SentimentVeryDissatisfiedIcon, {\n          className: classes.sorryIcon,\n          color: \"primary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this), \"Sorry, there were no post results for \\\"\", query, \"\\\"\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this), 'next' in searchResults && /*#__PURE__*/_jsxDEV(LoadMoreButton, {\n        handleLoadPosts: handleLoadPosts,\n        loading: loadingMore\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n};\n_s(SearchResults, \"1+EzdZn6aX2I5i+gR9CXg/QmiXY=\", false, function () {\n  return [useSearchPageStyles, useParams, useDispatch, useSelector];\n});\n_c = SearchResults;\nexport default SearchResults;\nvar _c;\n$RefreshReg$(_c, \"SearchResults\");","map":{"version":3,"names":["React","useEffect","useState","useParams","useDispatch","useSelector","setSearchResults","toggleUpvote","toggleDownvote","loadSearchPosts","notify","PostCard","LoadMoreButton","LoadingSpinner","getErrorMsg","Container","Paper","Typography","useSearchPageStyles","SearchIcon","SentimentVeryDissatisfiedIcon","jsxDEV","_jsxDEV","SearchResults","_s","classes","query","dispatch","searchResults","state","search","page","setPage","loadingMore","setLoadingMore","pageLoading","setPageLoading","getSearchResults","err","disableGutters","children","variant","className","mainPaper","text","fileName","_jsxFileName","lineNumber","columnNumber","handleLoadPosts","prevState","color","infoPaper","fontSize","style","marginRight","results","length","map","s","post","id","noResults","sorryIcon","loading","_c","$RefreshReg$"],"sources":["C:/Ak/E/reddish-master/client/src/components/SearchResults.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  setSearchResults,\n  toggleUpvote,\n  toggleDownvote,\n  loadSearchPosts,\n} from '../reducers/searchReducer';\nimport { notify } from '../reducers/notificationReducer';\nimport PostCard from './PostCard';\nimport LoadMoreButton from './LoadMoreButton';\nimport LoadingSpinner from './LoadingSpinner';\nimport getErrorMsg from '../utils/getErrorMsg';\n\nimport { Container, Paper, Typography } from '@material-ui/core';\nimport { useSearchPageStyles } from '../styles/muiStyles';\nimport SearchIcon from '@material-ui/icons/Search';\nimport SentimentVeryDissatisfiedIcon from '@material-ui/icons/SentimentVeryDissatisfied';\n\nconst SearchResults = () => {\n  const classes = useSearchPageStyles();\n  const { query } = useParams();\n  const dispatch = useDispatch();\n  const searchResults = useSelector((state) => state.search);\n  const [page, setPage] = useState(1);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [pageLoading, setPageLoading] = useState(true);\n\n  useEffect(() => {\n    const getSearchResults = async () => {\n      try {\n        setPageLoading(true);\n        await dispatch(setSearchResults(query));\n        setPageLoading(false);\n      } catch (err) {\n        dispatch(notify(getErrorMsg(err), 'error'));\n      }\n    };\n    getSearchResults();\n    setPage(1);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [query]);\n\n  if (!searchResults || pageLoading) {\n    return (\n      <Container disableGutters>\n        <Paper variant=\"outlined\" className={classes.mainPaper}>\n          <LoadingSpinner text={'Searching for matches...'} />\n        </Paper>\n      </Container>\n    );\n  }\n\n  const handleLoadPosts = async () => {\n    try {\n      setLoadingMore(true);\n      await dispatch(loadSearchPosts(query, page + 1));\n      setPage((prevState) => prevState + 1);\n      setLoadingMore(false);\n    } catch (err) {\n      dispatch(notify(getErrorMsg(err), 'error'));\n    }\n  };\n\n  return (\n    <Container disableGutters>\n      <Paper variant=\"outlined\" className={classes.mainPaper}>\n        <Paper variant=\"outlined\">\n          <Typography\n            variant=\"h6\"\n            color=\"secondary\"\n            className={classes.infoPaper}\n          >\n            <SearchIcon fontSize=\"large\" style={{ marginRight: '7px' }} />\n            Showing search results for \"{query}\"\n          </Typography>\n        </Paper>\n        {searchResults.results.length !== 0 ? (\n          searchResults.results.map((s) => (\n            <PostCard\n              key={s.id}\n              post={s}\n              toggleUpvote={toggleUpvote}\n              toggleDownvote={toggleDownvote}\n            />\n          ))\n        ) : (\n          <Typography variant=\"h5\" className={classes.noResults}>\n            <SentimentVeryDissatisfiedIcon\n              className={classes.sorryIcon}\n              color=\"primary\"\n            />\n            Sorry, there were no post results for \"{query}\"\n          </Typography>\n        )}\n        {'next' in searchResults && (\n          <LoadMoreButton\n            handleLoadPosts={handleLoadPosts}\n            loading={loadingMore}\n          />\n        )}\n      </Paper>\n    </Container>\n  );\n};\n\nexport default SearchResults;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}